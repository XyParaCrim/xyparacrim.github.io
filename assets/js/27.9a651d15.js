(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{508:function(s,t,e){"use strict";e.r(t);var a=e(4),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"redis位图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis位图"}},[s._v("#")]),s._v(" Redis位图")]),s._v(" "),e("blockquote",[e("p",[s._v("😫😫")]),s._v(" "),e("p",[e("code",[s._v("Redis")]),s._v("位图非常适合用于用户一年签到之类的场景")])]),s._v(" "),e("h2",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),e("p",[s._v("Redis位图以Bit数组的形式，若超出偏移范围会自动扩充。")]),s._v(" "),e("h2",{attrs:{id:"cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cli"}},[s._v("#")]),s._v(" Cli")]),s._v(" "),e("h3",{attrs:{id:"setbit-和-getbit-单字符操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setbit-和-getbit-单字符操作"}},[s._v("#")]),s._v(" "),e("code",[s._v("setbit")]),s._v(" 和 "),e("code",[s._v("getbit")]),s._v("：单字符操作")]),s._v(" "),e("p",[s._v("通过位操作将字符串设置为Hello:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("H")]),s._v("："),e("code",[s._v("0b1101000")])]),s._v(" "),e("li",[e("code",[s._v("E")]),s._v("："),e("code",[s._v("0b1100101")])]),s._v(" "),e("li",[e("code",[s._v("L")]),s._v("："),e("code",[s._v("0b1101100")])]),s._v(" "),e("li",[e("code",[s._v("O")]),s._v("："),e("code",[s._v("0b1101111")])])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("setbit s "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsetbit s "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsetbit s "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsetbit s "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsetbit s "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsetbit s "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsetbit s "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nget s\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"he"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("div",{staticClass:"custom-block warning"},[e("p",[s._v("若获取字符无法打印，cli会以十六进制的形式打印，例如"),e("code",[s._v("\\xc0")])])]),s._v(" "),e("h3",{attrs:{id:"bitcount和bitops"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bitcount和bitops"}},[s._v("#")]),s._v(" "),e("code",[s._v("bitcount")]),s._v("和"),e("code",[s._v("bitops")])]),s._v(" "),e("ul",[e("li",[e("code",[s._v("setbit")]),s._v(" 和 "),e("code",[s._v("getbit")]),s._v("：单字符操作")]),s._v(" "),e("li",[e("code",[s._v("bitcount")]),s._v("：用来统计指定范围内1的个数")]),s._v(" "),e("li",[e("code",[s._v("bitops")]),s._v("：查找指定范围内出现的一个1或者0")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" w hello\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hello中1的个数")]),s._v("\nbitcount w\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# h中1的个数")]),s._v("\nbitcount w "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第一个0")]),s._v("\nbitops w "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"bitfield"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bitfield"}},[s._v("#")]),s._v(" "),e("code",[s._v("bitfield")])]),s._v(" "),e("p",[e("code",[s._v("bitfield")]),s._v("用于多位操作，拥有"),e("code",[s._v("get")]),s._v("、"),e("code",[s._v("set")]),s._v("和"),e("code",[s._v("incrby")]),s._v("三个子指令，指令提示：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("bitfield key [GET type offset] [SET type offset value] [INCRBY type offset increment] [OVERFLOW WRAP|SAT|FAIL]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("从h高4位无符号（u）是6")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" bitfield w get u4 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("从l高4位有符号（i）数是-3")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" bitfield w get i3 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("批量执行")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" bitfield w get u4 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" get u3 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" get i4 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" get i3 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("溢出策略")]),s._v(" "),e("ul",[e("li",[s._v("wrap：折返（255 + 1 = 0，127 + 1 = -128）")]),s._v(" "),e("li",[s._v("sat：饱和截断（不做操作）")]),s._v(" "),e("li",[s._v("fail：失败")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" bitfield w overflow sat incrby u4 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",[s._v("overflow与Java一样：64位")])])])}),[],!1,null,null,null);t.default=n.exports}}]);