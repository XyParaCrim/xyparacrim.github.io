(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{506:function(t,e,r){"use strict";r.r(e);var v=r(4),s=Object(v.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"redis-cluster"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#redis-cluster"}},[t._v("#")]),t._v(" Redis Cluster")]),t._v(" "),r("ul",[r("li",[t._v("Redis Cluster共分为三个对等的部分（无主从），每个部分可以由一个实例或一个集群组成。")]),t._v(" "),r("li",[t._v("它们通过独特二进制协议通讯，并将所有数据分为16384个槽位。")]),t._v(" "),r("li",[t._v("key的定位通过客户端缓存其槽位信息，并在槽位不一致时，校正调整。")])]),t._v(" "),r("blockquote",[r("p",[t._v("节点需要配置信息持久化到配置文件中，必须保证配置文件可写的权限")])]),t._v(" "),r("h2",{attrs:{id:"跳转"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#跳转"}},[t._v("#")]),t._v(" 跳转")]),t._v(" "),r("p",[r("code",[t._v("MOVED")]),t._v("：当客户端向一个错误的客户端发送指令后，该节点发现key所在的槽位并不归自己管理，这时会发生"),r("code",[t._v("MOVED")]),t._v("告诉客户端其他节点获取key")]),t._v(" "),r("h2",{attrs:{id:"迁移"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#迁移"}},[t._v("#")]),t._v(" 迁移")]),t._v(" "),r("ul",[r("li",[t._v("Source Slot：migrating")]),t._v(" "),r("li",[t._v("Target Slot：importing")])]),t._v(" "),r("p",[t._v("若客户端访问Source节点时，返回"),r("code",[t._v("MOVED")]),t._v("指定到新节点，若新节点又返回"),r("code",[t._v("MOVED")]),t._v("指令，则会造成循环，所以访问新节点时，需要加上"),r("code",[t._v("ASKING")]),t._v("指令")]),t._v(" "),r("h2",{attrs:{id:"网络抖动"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#网络抖动"}},[t._v("#")]),t._v(" 网络抖动")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("cluster-node-timeout")]),t._v("：表示节点持续timeout失联时间，才会认为节点出现故障，需要进行主备切换")]),t._v(" "),r("li",[r("code",[t._v("cluster-slave-validity-factor")]),t._v("：timeout系数")])])])}),[],!1,null,null,null);e.default=s.exports}}]);